<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="Dashboard">
	<meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
	
	<title>Beauty_Chu Admin</title>
	
	<!-- Bootstrap core CSS -->
	<link href="assets/css/bootstrap.css" rel="stylesheet">
	<!--external css-->
	<link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
	<!-- <link rel="stylesheet" type="text/css" href="assets/js/bootstrap-datepicker/css/datepicker.css" /> 
	<link rel="stylesheet" type="text/css" href="assets/js/bootstrap-daterangepicker/daterangepicker.css" />-->
	    
	<!-- Custom styles for this template -->
	<link href="assets/css/style.css" rel="stylesheet">
	<link href="assets/css/style-responsive.css" rel="stylesheet">
	
<style>
.thumb {
	height: 200px;
	border: 1px solid #ccc;
	margin: 10px 5px 0 0;
}

#list-output div {
	display: inline-block;
}
#list-output div a {
	color: #555;
	font-size: 0.8em;
}
#list-output div a:focus, #list-output div a:hover {
	color: red;
	font-size: 0.8em;
}

</style>
</head>

<body>

  <section id="container" >
      <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
      <!--header start-->
      <header class="header black-bg">
              <div class="sidebar-toggle-box">
                  <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
              </div>
            <!--logo start-->
            <a href="coupon.html#" class="logo"><b>Beauty_Chu Admin</b></a>
            <!--logo end-->
            <div class="top-menu">
            	<ul class="nav pull-right top-menu">
                    <li><a class="logout" href="login.html">Logout</a></li>
            	</ul>
            </div>
        </header>
      <!--header end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse ">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu" id="nav-accordion">
              
              	  <p class="centered"><a href="shop_info.html"><img class="img-circle" width="60"></a></p>
              	  <h5 id="sidebar-shopName" class="centered"></h5>
              	  <h6 id="sidebar-shopAddr" class="centered"></h6>
              	  <h6 id="sidebar-shopTel" class="centered"></h6>
              	  	
              	  	
              	  <li class="mt sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-credit-card"></i>
                          <span>Coupon</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="coupon.html">Coupon Management</a></li>
                      </ul>
                  </li>
                  	
                  <li class="sub-menu">
                      <a class="active"  href="javascript:;" >
                          <i class="fa fa-edit"></i>
                          <span>Woman Style</span>
                      </a>
                      <ul class="sub">
                          <li class="active"><a href="style_addStyle.html">Add Woman Style</a></li>
                          <li><a  href="style_cut.html#">Woman Cut</a></li>
                          <li><a  href="style_perm.html#">Woman Perm</a></li>
                          <li><a  href="style_color.html#">Woman Color</a></li>
                          <li><a  href="style_care.html#">Woman Care</a></li>
                          <li><a  href="style_etc.html#">Woman ETC</a></li>
                      </ul>
                  </li>

                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-key"></i>
                          <span>Shop</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="shop_info.html">Shop Info</a></li>
                          <li><a  href="shop_priceList.html">Price List</a></li>
                      </ul>
                  </li>
                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-star-o"></i>
                          <span>Celebrity</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="celeb_man.html#">Celebrity Man</a></li>
                          <li><a  href="celeb_woman.html#">Celebrity Woman</a></li>
                      </ul>
                  </li>

              </ul>
              <!-- sidebar menu end-->
          </div>
      </aside>
      <!--sidebar end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
          	<h3><i class="fa fa-angle-right"></i> Woman Style</h3>
          	
          	<!-- BASIC FORM ELELEMNTS -->
          	<div class="row mt">
          		<div class="col-lg-12">
                  <div class="form-panel">
                  	  <h4 class="mb"><i class="fa fa-angle-right"></i> Add Woman Style</h4>
                  	  
                      <form class="form-horizontal style-form" id="styleForm" method="post" enctype="multipart/formdata">
                      
                      	  <div class="form-group">
                          	<label class="col-lg-1 col-sm-1 control-label"><b>분 류</b></label>
                          	<div class="col-sm-3">
	                            <select id="styleSort" class="form-control round-form">
								  <option>Cut</option>
								  <option>Perm</option>
								  <option>Color</option>
								  <option>Care</option>
								  <option>ETC</option>
								</select>
							</div>
                          </div>
                          
                          <div class="form-group">
                          	<label class="col-lg-1 col-sm-1 control-label"><b>기 장</b></label>
                          	<div class="col-sm-3">
	                            <select id="styleLength" class="form-control round-form">
								  <option>Short</option>
								  <option>Medium</option>
								  <option>Long</option>
								</select>
							</div>
                          </div>
						
                          <div class="form-group">
                              <label class="col-lg-1 col-sm-1 control-label"><b>제 목</b></label>
                              <div class="col-sm-10">
                                  <input type="text" id="styleName" class="form-control round-form">
                              </div>
                          </div>
                          
                          <div class="form-group">
                              <label class="col-lg-1 col-sm-1 control-label"><b>가 격</b></label>
                              <div class="col-sm-10">
                                  <input type="text" id="price" class="form-control round-form" numberonly="true" maxlength="8">
                              </div>
                          </div>
                          
                          <div class="form-group">
                              <label class="col-lg-1 col-sm-1 control-label"><b>소 개</b></label>
                              <div class="col-sm-10">
                              	<textarea id='styleIntro' name="style-intro" rows="2" cols="80" class="form-control round-form"></textarea>
								<div class="remaining text-right">남은 글자수: <span class="info-count">100</span></div>
                              </div>
                          </div>
                          
                          <div class="form-group">
                              <label class="col-lg-1 col-sm-1 control-label"><b>사 진</b></label>
                              <div class="col-sm-10">
                              	<input type="file" id="photofile" name="files[]" accept="image/*" multiple/>
								<output id="list-output"><br></output>
                              </div>
                          </div>
                          
                          <!-- Add Style Button -->
                          <div class="form-group">
                          	<div class="col-lg-12">
                          		<button type="button" id="style-addBtn" class="btn btn-theme btn-block btn-lg">Add Style</button>
                          	</div>
                       	  </div>
                          	
                      </form>
                  </div>
          		</div><!-- col-lg-12-->      	
          	</div><!-- /row -->

		</section><!--/wrapper -->
      </section><!-- /MAIN CONTENT -->

      <!--main content end-->
      
      
      <!--footer start-->
      <footer class="site-footer">
          <div class="text-center">
              2015 Beauty Chu~♥
              <a href="#" class="go-top">
                  <i class="fa fa-angle-up"></i>
              </a>
          </div>
      </footer>
      <!--footer end-->
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <!-- ajax fileupload -->
	<script src="assets/js/jquery.form.js"></script>
	<!-- jQuery MultiFile Plugin import -->
	<script src="assets/js/jquery.MultiFile.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>


    <!--common script for all pages-->
    <script src="assets/js/common-scripts.js"></script>

    <!--script for this page-->
    <script src="assets/js/jquery-ui-1.9.2.custom.min.js"></script>

	<!--custom switch-->
	<script src="assets/js/bootstrap-switch.js"></script>
	
	<!--custom tagsinput-->
	<script src="assets/js/jquery.tagsinput.js"></script>
	
	<!--custom checkbox & radio-->
	<script type="text/javascript" src="assets/js/bootstrap-inputmask/bootstrap-inputmask.min.js"></script>
	

<script type="text/javascript">
var imsiEmail;
$(function() {
	    /* AJAX로 email 로그인 정보 가져오기 */
	    $.ajax({
			type : 'get',
			dataType : "json",
			url : '../../json/auth/loginUser.do',
			success : function(data) {
				console.log("login 정보" + data.status);
				console.log(data.loginUser);
				$('#email').val(data.loginUser.email);
				imsiEmail = data.loginUser.email;
			},
			error : function() {
				console.log('ajax 실패');
			}
		}).done(function(){
		    /* AJAX로 email로 sidebar shop 정보 가져오기 */
		    $.ajax({
				type : 'post',
				dataType : "json",
				data : {
					email : imsiEmail
				},
				url : '../../json/shopInfo/list.do',
				success : function(data) {
					$('#sidebar-shopName').text(data.listShopInfo[0].shopName);
					$('#sidebar-shopAddr').text(data.listShopInfo[0].shopAddr);
					$('#sidebar-shopTel').text(data.listShopInfo[0].shopTel);
				},
				error : function() {
					console.log('ajax shop정보 실패');
				}
			});
		});
	    
	   
		$('#style-addBtn').click(function() {
			/* photofile list 뽑기 */
			/* var fileInput = document.getElementById('photofile');
			var data = new FormData(document.getElementById('styleForm'));
			for (var i = 0; i < fileInput.files.length; ++i) {
			  var name = fileInput.files.item(i).name;
			  console.log("--------------------------");
			  console.log("here is a files : " + fileInput.files);
			  console.log("here is a file name: " + name);
			  data.append(fileInput.files.item(i));
			} */
			
			var data = new FormData(document.getElementById('styleForm'));
			
			$.each($('#photofile')[0].files, function(i, file) {
				data.append('file-' + i, file);
			}); 
			
			$.ajax({
				url: '../../json/stylePhoto/fileUpload.do',
					data: {
						email : imsiEmail
					},
					cache: false,
					processData: false,
					contentType: false,
					type: "POST",
					dataType: "json",
					success: function (data) {
						alert("CREATE SUCCESS");
						$(location).attr('href',"#list");
					},
					error: function(data){
						alert("CREATE ERROR");
						console.log(arguments);
						$(location).attr('href',"#list");
					}
					
				});
						
			 /* AJAX로 서버로 file upload */
			/* $("form").ajaxSubmit({
				dataType : "json",
				url : '../../json/shop/fileUpload.do',
				data : {email : imsiEmail},
				success : function(data) {
					console.log("파일업로드 " + data);
				},
				error : function(error) {
					alert("요청 처리 중 오류가 발생하였습니다.");
				}
			}); */
			
			/* AJAX로 서버로 add */
			$.ajax({
				type : 'post',
				dataType : "json",
				url : '../../json/style/add.do',
				data : {
					email : imsiEmail,
					people : 'normal',
					gender : 'woman',
					styleSort : $('#styleSort option:selected').val(),
					styleLength : $('#styleLength option:selected').val(),
					styleName : $('#styleName').val(),
					price : $('#price').val(),
					styleIntro : $('#styleIntro').val(),
					photoList : $('#photofile').val()
				},
				success : function(data) {
					console.log("add:" + data.status);
					alert('등록완료');
					$('form').each(function() {
						this.reset();
					});
					$('#list-output').empty();
					
					location.href = '#' 
				},
				error : function() {
					console.log('등록 실패');
				}

			});
			
		});
});
</script>  
  
  
  <script>
  /*
  ** 폼
  **
  ** <input type="text" numberonly="true" />  // 숫자만 입력 가능한 텍스트박스
  ** <input type="text" datetimeonly="true" /> // 숫자, 콜론(:), 하이픈(-)만 입력 가능한 텍스트박스
  */
  $(function()
  {
   $(document).on("keyup", "input:text[numberOnly]", function() {$(this).val( $(this).val().replace(/[^0-9]/gi,"") );});
   $(document).on("keyup", "input:text[datetimeOnly]", function() {$(this).val( $(this).val().replace(/[^0-9:\-]/gi,"") );});
  });
  
  <!-- Browse Short... image preview ------------------------------------------------------------------------>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    console.log("files" + files);
    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }
      console.log(f);
      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var date = new Date();
          var file = date.getTime();
          
          var div = document.createElement('div');
          div.id = file;
          div.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/><br>',escape(theFile.name),
                            '&nbsp; <a href="javascript:del(',file,')">삭제</a>'].join('');
          
          document.getElementById('list-output').insertBefore(div, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }
  
  	function del(value) {
		document.getElementById(value).remove();
	}

  document.getElementById('photofile').addEventListener('change', handleFileSelect, false);

<!-- 스타일정보 maxlength -->
$('.remaining').each(function() {
      // count 정보 및 count 정보와 관련된 textarea/input 요소를 찾아내서 변수에 저장한다.
      var $count = $('.info-count', this);
      var $input = $(this).prev();
      // .text()가 문자열을 반환하기에 이 문자를 숫자로 만들기 위해 1을 곱한다.
      var maximumCount = $count.text() * 1;
      // update 함수는 keyup, paste, input 이벤트에서 호출한다.
      var update = function() {
          var before = $count.text() * 1;
          var now = maximumCount - $input.val().length;
          // 사용자가 입력한 값이 제한 값을 초과하는지를 검사한다.
          if (now < 0) {
              var str = $input.val();
              alert('글자 입력수가 초과하였습니다.');
              $input.val(str.substr(0, maximumCount));
              now = 0;
          }
          // 필요한 경우 DOM을 수정한다.
          if (before != now) {
              $count.text(now);
          }
      };
      // input, keyup, paste 이벤트와 update 함수를 바인드한다
      $input.bind('input keyup paste', function() {
          setTimeout(update, 0)
      });
      update();
  });
</script>

</body>
</html>
